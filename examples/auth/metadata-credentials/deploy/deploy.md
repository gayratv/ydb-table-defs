# Порядок deploy

Deploy делается с помощью yc
Утановите yc и создайте профиль

### Начало работы с интерфейсом командной строки
https://cloud.yandex.ru/docs/cli/quickstart

### Получите токен как указано в документации:
https://cloud.yandex.ru/docs/iam/concepts/authorization/oauth-token

### Создайте профиль
yc init

// создается профиль с меткой as006<br>
yc config profile create as006

// установите ранее полученный токен<br>
yc config set --token AQAAA*************

// установите id каталога и облака<br>
yc config set folder-id b1gt***************
yc config set cloud-id b1gc**************

// проконтролируйте ранее введенные параметры<br>
yc config profile get as006

### установите парсер json - нужен для yc
sudo apt-get install jq

### Заполните Вашими данными main.env
Данные, хранящиеся в main.env не являются секретами.
Самое главное - введите свои данные - иначе deploy не сработает.

# Запуск deploy
### Из корня проекта запустите:
.//deploy/first-setup-func.sh
Эта команда создает новую функцию и делает ее публичной.
У вновь созданной функции запрашивается function_id и записывает в файл.

Далее запускайте создание экземпляра функции:
./deploy/deploy.sh

Скрипт разделен на две части потому что Вам требуется один раз создать функцию и по мере разработки запускать создание версий функции.

# Вниманию windows пользователей!
Скрипты написаны под lunix bash

Под windows их можно запустить из среды wsl (встроенная в windows виртуальная машина ubuntu)

Также необходимо проконтролировать что при импорте из github в файлах *.sh у Вас перевод картеки установлен только в LF - иначе скрипты выдадут ошибку.

В некоторых случаях на скрипты необходимо дать права на исполнение.

